FROM python:3.12-slim AS build
ADD . /pythonapp
WORKDIR /pythonapp
#this throw out error
# RUN pip install --upgrade pip3 
#all dependices store in devops folder
RUN pip install --prefix=/devops -r requirements.txt  

FROM python:3.12-slim AS run
LABEL project="pythonProject"
LABEL author="devOpsTeam"
#if we  use this copy only its get an error so we can wuse both copy 
COPY --from=build  /pythonapp /aws  
 #from build stage pipi depende store in base image
COPY --from=build  /devops  /usr/local  
WORKDIR /aws
EXPOSE 5001
CMD ["python3", "app.py"]

