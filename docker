FROM python:3.12-slim AS build
ADD . /pythonapp
WORKDIR /pythonapp
# RUN pip install --upgrade pip3
RUN pip install --prefix=/devops -r requirements.txt  #all dependices store in devops folder

FROM python:3.12-slim AS run
LABEL project="pythonProject"
LABEL author="devOpsTeam"
COPY --from=build  /pythonapp /aws  #if we  use this copy only its get an error so we can wuse both copy 
COPY --from=build  /devops  /usr/local   #from build stage pipi depende store in base image
WORKDIR /aws
EXPOSE 5001
CMD ["python3", "app.py"]

